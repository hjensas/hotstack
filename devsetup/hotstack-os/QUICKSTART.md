# HotStack-OS Quick Start Guide

Guide for using HotStack-OS with HotStack scenarios.

## Prerequisites

HotStack-OS must be installed and running. See [INSTALL.md](INSTALL.md) for installation instructions.

## Setup for HotStack

### 1. Install OpenStack Client (Optional)

Install the OpenStack client packages on your host:

```bash
sudo make install-client
```

This installs:
- `python3-openstackclient` - Main OpenStack CLI
- `python3-heatclient` - Heat orchestration CLI

**Note**: You can also install these in a Python virtualenv if you prefer not to install system-wide.

### 2. Create HotStack Resources

```bash
make post-setup
```

This creates resources needed by HotStack scenarios:
- HotStack project and user (hotstack/hotstack)
- Quotas for hotstack project (40 cores, 100GB RAM, 1TB storage)
- Compute flavors (hotstack.small, medium, large, etc.) - shared/public
- Default private network (192.168.100.0/24) - shared
- Provider network (172.31.0.128/25) - shared, for floating IPs
- Router connecting private and external networks
- Security group rules (SSH, ICMP) for both admin and hotstack projects
- Test image (Cirros) - public
- HotStack images (controller, blank, nat64, iPXE) - downloaded from GitHub releases and uploaded

**Note**: Images are downloaded from the latest GitHub releases. If an image is not found, you may need to run the GitHub workflow to build and publish it first.

### 3. Verify Setup

```bash
# Use the hotstack user credentials
export OS_CLOUD=hotstack-os

# Verify resources are available
openstack network list
openstack flavor list
openstack image list
```

### 4. Create Application Credential

```bash
# Use the hotstack user for regular operations
export OS_CLOUD=hotstack-os
openstack application credential create hotstack-cred --unrestricted
```

Save the `id` and `secret` from the output.

### 5. Create Cloud Secret File

```bash
cat > ~/cloud-secret.yaml <<EOF
hotstack_cloud_secrets:
  auth_url: http://keystone.hotstack-os.local:5000
  application_credential_id: <ID_FROM_ABOVE>
  application_credential_secret: <SECRET_FROM_ABOVE>
  region_name: RegionOne
  interface: internal
  identity_api_version: 3
  auth_type: v3applicationcredential
EOF
```

### 6. Install Ansible and Collections

```bash
cd ../../  # Back to hotstack root

# Install Ansible (if not already installed)
sudo dnf install ansible-core
# Or: pip install ansible

# Install required Ansible collections
ansible-galaxy collection install -r requirements.yml
```

### 7. Run HotStack Scenario

```bash
# Run any HotStack scenario
ansible-playbook bootstrap.yml \
  -e @scenarios/sno-2-bm/bootstrap_vars.yml \
  -e @~/cloud-secret.yaml
```

## Additional Resources

- [README.md](README.md) - Overview and management commands
- [INSTALL.md](INSTALL.md) - Installation guide
- [CONFIGURATION.md](CONFIGURATION.md) - Configuration options
- [ARCHITECTURE.md](ARCHITECTURE.md) - Architecture details
